<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Access Protocol</title>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@600&family=Poppins:wght@400;600&display=swap" rel="stylesheet">
    <style>
        body { 
            background: url('https://images.unsplash.com/photo-1550745165-9bc0b252726f?q=80&w=2070&auto=format&fit=crop') no-repeat center center/cover;
            height: 100vh; margin: 0; font-family: 'Poppins', sans-serif; display: flex; align-items: center; justify-content: center;
        }
        body::before { content: ''; position: absolute; top:0; left:0; width:100%; height:100%; background: rgba(0,0,0,0.7); backdrop-filter: blur(8px); }
        
        .card {
            position: relative; width: 85%; max-width: 350px;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 20px; padding: 40px 30px;
            box-shadow: 0 25px 50px rgba(0,0,0,0.5);
            backdrop-filter: blur(15px);
            animation: float 6s ease-in-out infinite;
        }

        h2 { color: #ffd700; text-align: center; font-family: 'Orbitron', sans-serif; margin-bottom: 30px; text-shadow: 0 0 10px rgba(255, 215, 0, 0.3); }

        .input-group { position: relative; margin-bottom: 25px; }
        input { 
            width: 100%; padding: 10px 0; font-size: 16px; color: #fff;
            border: none; border-bottom: 2px solid #555; outline: none; background: transparent; transition: 0.3s;
        }
        label { position: absolute; top: 10px; left: 0; color: #aaa; pointer-events: none; transition: 0.3s; font-size: 14px; }
        
        input:focus ~ label, input:not(:placeholder-shown) ~ label { top: -20px; font-size: 12px; color: #ffd700; }
        input:focus { border-bottom-color: #ffd700; }

        button {
            width: 100%; padding: 15px; background: linear-gradient(45deg, #ffd700, #ff8c00);
            border: none; border-radius: 30px; color: #000; font-weight: 700; font-family: 'Orbitron', sans-serif;
            cursor: pointer; box-shadow: 0 5px 15px rgba(255, 215, 0, 0.4); transition: 0.3s; margin-top: 10px;
        }
        button:active { transform: scale(0.95); }

        .switch-text { text-align: center; color: #fff; margin-top: 20px; font-size: 13px; cursor: pointer; opacity: 0.8; }
        .switch-text span { color: #ffd700; font-weight: bold; }
        
        .hidden { display: none; }
        @keyframes float { 0%,100% { transform: translateY(0); } 50% { transform: translateY(-10px); } }
    </style>
</head>
<body>

<div class="card">
    <h2 id="title">LOGIN</h2>
    
    <!-- Login -->
    <div id="login-form">
        <div class="input-group">
            <input type="number" id="l-phone" placeholder=" ">
            <label>Phone Number</label>
        </div>
        <div class="input-group">
            <input type="password" id="l-pass" placeholder=" ">
            <label>Password</label>
        </div>
        <button onclick="login()">ENTER GAME</button>
    </div>

    <!-- Register -->
    <div id="reg-form" class="hidden">
        <div class="input-group">
            <input type="text" id="r-name" placeholder=" ">
            <label>Full Name</label>
        </div>
        <div class="input-group">
            <input type="text" id="r-user" placeholder=" ">
            <label>Username (@)</label>
        </div>
        <div class="input-group">
            <input type="number" id="r-phone" placeholder=" ">
            <label>Phone Number</label>
        </div>
        <div class="input-group">
            <input type="password" id="r-pass" placeholder=" ">
            <label>Password</label>
        </div>
        <button onclick="register()">CREATE ACCOUNT</button>
    </div>

    <p class="switch-text" onclick="switchMode()" id="toggle-txt">New here? <span>Register Now</span></p>
</div>

<script>
    // Firebase Config (Keep your original config)
    const firebaseConfig = { apiKey: "AIzaSyC2Uxgv0vjY2G6xgQ6jAwOkKHIp8wKRFvk", authDomain: "game-ee829.firebaseapp.com", databaseURL: "https://game-ee829-default-rtdb.firebaseio.com", projectId: "game-ee829", storageBucket: "game-ee829.firebasestorage.app", messagingSenderId: "70259643410", appId: "1:70259643410:web:2539716504e7ba635434cb" };
    firebase.initializeApp(firebaseConfig);
    const db = firebase.database();

    let isLogin = true;

    function switchMode() {
        isLogin = !isLogin;
        document.getElementById('title').innerText = isLogin ? 'LOGIN' : 'REGISTER';
        document.getElementById('login-form').classList.toggle('hidden');
        document.getElementById('reg-form').classList.toggle('hidden');
        document.getElementById('toggle-txt').innerHTML = isLogin ? 'New here? <span>Register Now</span>' : 'Have an account? <span>Login</span>';
    }

    function register() {
        const name = document.getElementById('r-name').value;
        const user = document.getElementById('r-user').value;
        const phone = document.getElementById('r-phone').value;
        const pass = document.getElementById('r-pass').value;

        if(!name || !user || !phone || !pass) return alert("Fill all fields");
        if(!user.startsWith("@")) return alert("Username must start with @");

        db.ref('users/'+phone).set({ fullName: name, username: user, password: pass, phone: phone, score: 0, photo: "https://i.ibb.co/3M3w113/avatar.png" });
        alert("Account Created!"); switchMode();
    }

    function login() {
        const phone = document.getElementById('l-phone').value;
        const pass = document.getElementById('l-pass').value;
        db.ref('users/'+phone).once('value', s => {
            if(s.exists() && s.val().password === pass) {
                localStorage.setItem('art_user_phone', phone);
                window.location.href = 'home.html';
            } else alert("Invalid Credentials");
        });
    }
</script>
</body>
</html>
